---
import BasePage from "@/layouts/BasePage.astro";

import ContentEN from "@/locales/en";
import ContentFR from "@/locales/fr";
import type { TranslationType } from "@/types/Translations";
import {
  SUPPORTED_LANGS_DYNAMICS,
  type LangForPathDinamic,
} from "@/types/lang";
import { setPageContext } from "@/contexts/PageContext";

// âœ… getStaticPaths DEBE estar dentro del bloque `---`
export const getStaticPaths = () => {
  return SUPPORTED_LANGS_DYNAMICS.map((lang) => ({
    params: { lang },
  }));
};

const rawLang = Astro.params.lang ?? "es";
const lang = SUPPORTED_LANGS_DYNAMICS.includes(rawLang as LangForPathDinamic)
  ? (rawLang as LangForPathDinamic)
  : "en";

const contentByLang: Record<LangForPathDinamic, TranslationType> = {
  en: ContentEN,
  fr: ContentFR,
};

const content = contentByLang[lang];
setPageContext(lang, content);
---

<BasePage title={content.page.title} />
